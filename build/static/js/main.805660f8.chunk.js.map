{"version":3,"sources":["assets/beep.mp3","js/helpers.js","js/model.js","js/api.js","components/Navigator.jsx","components/ResultOptions.jsx","components/Box.jsx","components/Wifi.jsx","components/Home.jsx","components/Modal.jsx","components/Config.jsx","components/WifiConfig.jsx","components/App.jsx","index.js"],"names":["getSavedStorage","key","defaultVal","JSON","parse","window","localStorage","getItem","setSavedStorage","obj","setItem","stringify","removeFromStorage","target","values","filter","x","beepSound","Audio","beep","initial","pxWidth","cmWidth","boxes","size","time","ready","alarm","limit","model","setPxWidth","action","state","setCmWidth","setBoxes","setSize","setTime","clock","Date","setClock","network","setNetwork","message","setMessage","localhost","location","hostname","sendResult","payload","a","console","log","url","axiosPatch","response","data","networkScan","axios","get","networkSave","ssid","pass","post","getDeviceId","getCommit","defaults","headers","patch","Navigator","to","className","icon","faHome","faTools","ResultOptions","handleNegative","handlePositive","handleInvalid","handleMismatch","useStoreActions","useState","selection","setSelection","counter","setCounter","keyFlag","setKeyFlag","selectKey","setSelectKey","previousKey","isCommand","test","useEffect","buttonHandler","e","now","preventDefault","document","addEventListener","tic","setInterval","removeEventListener","clearInterval","disabled","Box","setReady","setFree","id","specimenID","status","setStatus","useStoreState","ratio","sizePx","parseInt","boxStyle","height","width","minHeight","minWidth","handleStart","handleStop","play","style","onClick","max","value","Wifi","faWifi","Home","elements","Array","keys","initBoxes","forEach","element","push","processingDateTime","numberCode","setNumberCode","code","setCode","setSpecimenID","display","setDisplay","lastTime","setLastTime","testBoxes","setTestBoxes","deviceID","setDeviceID","tempBoxes","handleResponse","find","handleSuccess","handleError","error","currentTests","map","availableBox","indexOf","includes","toLocaleString","SpecimenID","CovidTestResultID","CovidTestStatusID","DeviceID","then","catch","sendProcessingStart","recordedValues","recorded","record","res","scannerHandler","length","interval","navigator","onLine","Modal","active","setActive","title","confirm","setAction","Config","navigate","useNavigate","loading","setLoading","power","setPower","rpiId","setRpiId","commitDate","setCommitDate","actions","pxRef","setPxRef","cmRef","setCmRef","boxesRef","setBoxesRef","sizeRef","setSizeRef","timeRef","setTimeRef","commit","date","type","placeholder","onChange","setTimeout","faPowerOff","WifiConfig","networks","setNetworks","ssidRef","useRef","passRef","ref","current","n","snr","store","createStore","App","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.805660f8.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/beep.94ec08ca.mp3\";","import beep from \"../assets/beep.mp3\";\r\n\r\nexport const getSavedStorage = (key, defaultVal) => {\r\n  return JSON.parse(window.localStorage.getItem(key)) || defaultVal[key];\r\n};\r\n\r\nexport const setSavedStorage = (key, obj) => {\r\n  window.localStorage.setItem(key, JSON.stringify(obj));\r\n};\r\n\r\n// export const appendToStorage = (key, obj) => {\r\n//   const values = getSavedStorage(key, { [key]: [] });\r\n//   values.push(obj);\r\n//   setSavedStorage(key, values);\r\n// };\r\n\r\nexport const removeFromStorage = (key, obj, target) => {\r\n  const values = getSavedStorage(key, { [key]: [] });\r\n  setSavedStorage(\r\n    key,\r\n    values.filter((x) => x[target] !== obj[target])\r\n  );\r\n};\r\n\r\nexport const beepSound = new Audio(beep);\r\n","import { action } from \"easy-peasy\";\r\nimport { getSavedStorage } from \"./helpers\";\r\n\r\nconst initial = {\r\n  pxWidth: 1366,\r\n  cmWidth: 41,\r\n  boxes: 10,\r\n  size: [7, 2],\r\n  time: {\r\n    ready: 15,\r\n    alarm: 19,\r\n    limit: 20,\r\n  },\r\n};\r\n\r\nconst model = {\r\n  pxWidth: getSavedStorage(\"pxWidth\", initial),\r\n  setPxWidth: action((state, pxWidth) => {\r\n    state.pxWidth = pxWidth;\r\n  }),\r\n\r\n  cmWidth: getSavedStorage(\"cmWidth\", initial),\r\n  setCmWidth: action((state, cmWidth) => {\r\n    state.cmWidth = cmWidth;\r\n  }),\r\n\r\n  boxes: getSavedStorage(\"boxes\", initial),\r\n  setBoxes: action((state, boxes) => {\r\n    state.boxes = boxes;\r\n  }),\r\n\r\n  size: getSavedStorage(\"size\", initial),\r\n  setSize: action((state, size) => {\r\n    state.size = size;\r\n  }),\r\n\r\n  time: getSavedStorage(\"time\", initial),\r\n  setTime: action((state, time) => {\r\n    state.time = time;\r\n  }),\r\n\r\n  clock: Date(),\r\n  setClock: action((state, clock) => {\r\n    state.clock = clock;\r\n  }),\r\n\r\n  network: false,\r\n  setNetwork: action((state, network) => {\r\n    state.network = network;\r\n  }),\r\n\r\n  message: \"Scan a test\",\r\n  setMessage: action((state, message) => {\r\n    state.message = message;\r\n  }),\r\n};\r\n\r\nexport default model;","import axios from \"axios\";\r\n\r\nconst localhost = `http://${window.location.hostname}:9999`;\r\nconst remotehost = `https://imperans-devapi.azurewebsites.net`;\r\n\r\nexport const sendResult = async (payload) => {\r\n  console.log(\"... sending results:\", payload);\r\n  const url = `${remotehost}/api/covidratesting/device/ratestresult`;\r\n  const response = await axiosPatch(url, payload);\r\n  return response.data;\r\n};\r\n\r\nexport const networkScan = async () => {\r\n  console.log(\"... getting events\");\r\n  const url = `${localhost}/network/scan`;\r\n  const response = await axios.get(url);\r\n  return response.data;\r\n};\r\n\r\nexport const networkSave = async (ssid, pass) => {\r\n  console.log(\"... configure wifi\");\r\n  const url = `${localhost}/network/save`;\r\n  const response = await axios.post(url, { ssid, pass });\r\n  return response.data;\r\n};\r\n\r\nexport const shutdown = async () => {\r\n  console.log(\"... shutting down\");\r\n  const url = `${localhost}/shutdown`;\r\n  const response = await axios.post(url);\r\n  return response.data;\r\n};\r\n\r\nexport const restart = async () => {\r\n  console.log(\"... restarting\");\r\n  const url = `${localhost}/restart`;\r\n  const response = await axios.post(url);\r\n  return response.data;\r\n};\r\n\r\nexport const getDeviceId = async () => {\r\n  console.log(\"... get device ID\");\r\n  const url = `${localhost}/device/id`;\r\n  const response = await axios.get(url);\r\n  console.log(response.data);\r\n  return response.data;\r\n};\r\n\r\nexport const getCommit = async () => {\r\n  console.log(\"... get git commit\");\r\n  const url = `${localhost}/git/commit`;\r\n  const response = await axios.get(url);\r\n  return response.data;\r\n};\r\n\r\nconst axiosPatch = (url, payload) => {\r\n  axios.defaults.headers.post['Access-Control-Allow-Origin'] = '*';\r\n  return axios.patch(url, payload);\r\n};\r\n","import { Link } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTools, faHome } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst Navigator = ({ to }) => {\r\n  return (\r\n    <Link to={to} className=\"navigator\">\r\n      {to === \"/home\" ? (\r\n        <FontAwesomeIcon icon={faHome} />\r\n      ) : (\r\n        <FontAwesomeIcon icon={faTools} />\r\n      )}\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default Navigator;\r\n","import { useStoreActions } from \"easy-peasy\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst ResultOptions = ({ handleNegative, handlePositive, handleInvalid, handleMismatch }) => {\r\n  const setMessage = useStoreActions((action) => action.setMessage);\r\n  const [selection, setSelection] = useState(null);\r\n  const [counter, setCounter] = useState(3);\r\n  const [time, setTime] = useState();\r\n  const [keyFlag, setKeyFlag] = useState();\r\n  const [selectKey, setSelectKey] = useState();\r\n  let previousKey = null;\r\n  let counterVar = 3;\r\n\r\n  const isCommand = (key) => {\r\n    const commands =  /^[#|$|%]$/;\r\n    return commands.test(key);\r\n  }\r\n\r\n  useEffect(() => {\r\n    const buttonHandler = (e) => {\r\n      const key = e.key;\r\n\r\n      if (isCommand(key)) {\r\n        setSelectKey(key);\r\n        setKeyFlag(Date.now())\r\n        if (previousKey === null) {\r\n          // eslint-disable-next-line\r\n            previousKey = key;\r\n            setSelection(key);\r\n            setMessage(\"Press again to confirm:\");\r\n        } \r\n      }\r\n      if (key === \"F5\") e.preventDefault();\r\n    };\r\n\r\n    document.addEventListener(\"keydown\", buttonHandler);\r\n\r\n    const tic = setInterval(() => {\r\n      setTime(Date.now())\r\n    }, 1000);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", buttonHandler);\r\n      clearInterval(tic)\r\n    };\r\n\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useEffect(()=>{\r\n    if (selection !== null) {\r\n      setCounter(counter - 1);\r\n      // eslint-disable-next-line\r\n      counterVar=counter-1\r\n    }\r\n    else {\r\n      setCounter(3);\r\n      // eslint-disable-next-line\r\n      counterVar=3;\r\n    }\r\n  }, [time])\r\n\r\n  useEffect(()=>{\r\n    if (counter <= 0 && isCommand(selectKey)) {\r\n      if (selectKey === \"#\" && selection === \"#\") handleNegative();\r\n      if (selectKey === \"$\" && selection === \"$\") handlePositive();\r\n      if (selectKey === \"%\" && selection === \"%\") handleInvalid();\r\n      if (selectKey !== selection) handleMismatch();\r\n    }\r\n    // eslint-disable-next-line\r\n  },[keyFlag])\r\n\r\n  return (\r\n    <div className=\"field is-grouped mt-4\">\r\n      {(selection === \"#\" || selection === null) && (\r\n        <button\r\n          // onClick={handleNegative}\r\n          className=\"button is-large is-outlined is-success\"\r\n          disabled={selection !== null && counter > 0}\r\n        >\r\n          Not detected\r\n        </button>\r\n      )}\r\n      {(selection === \"$\" || selection === null) && (\r\n        <button\r\n          // onClick={handlePositive}\r\n          className=\"button is-large ml-4 is-outlined is-danger\"\r\n          disabled={selection !== null && counter > 0}\r\n        >\r\n          Detected\r\n        </button>\r\n      )}\r\n      {(selection === \"%\" || selection === null) && (\r\n        <button\r\n          // onClick={handleInvalid}\r\n          className=\"button is-large ml-4 is-outlined is-warning\"\r\n          disabled={selection !== null && counter > 0}\r\n        >\r\n          Incomplete\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default ResultOptions;\r\n","import { useStoreState } from \"easy-peasy\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { beepSound } from \"../js/helpers\";\r\n\r\nconst Box = ({ test, setReady, setFree }) => {\r\n  const { id, specimenID } = test;\r\n  const [counter, setCounter] = useState(0);\r\n  const [status, setStatus] = useState(\"free\"); // free - counting - finished - overtime\r\n\r\n  const size = useStoreState((state) => state.size);\r\n  const pxWidth = useStoreState((state) => state.pxWidth);\r\n  const cmWidth = useStoreState((state) => state.cmWidth);\r\n  const clock = useStoreState((state) => state.clock);\r\n  const time = useStoreState((state) => state.time);\r\n  const { ready, limit, alarm } = time;\r\n\r\n  const ratio = pxWidth / cmWidth;\r\n  const sizePx = [parseInt(size[0] * ratio), parseInt(size[1] * ratio)];\r\n\r\n  const boxStyle = {\r\n    height: sizePx[1],\r\n    width: sizePx[0],\r\n    minHeight: sizePx[1],\r\n    minWidth: sizePx[0],\r\n  };\r\n\r\n  const handleStart = () => {\r\n    setStatus(\"counting\");\r\n  };\r\n\r\n  const handleStop = () => {\r\n    setStatus(\"free\");\r\n    setCounter(0);\r\n    setReady(id, false);\r\n    setFree(id);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (status !== \"free\") {\r\n      setCounter(counter + 1);\r\n    }\r\n    if (counter >= ready) {\r\n      setStatus(\"finished\");\r\n      setReady(id, true);\r\n    }\r\n    if (counter >= limit) setStatus(\"overtime\");\r\n    if (counter >= alarm) beepSound.play();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [clock]);\r\n\r\n  useEffect(() => {\r\n    if (specimenID !== null) handleStart();\r\n    else handleStop();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [specimenID]);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={`out-box animate__animated has-background-${\r\n          (status === \"free\" && \"success\") ||\r\n          (status === \"counting\" && \"warning\") ||\r\n          (status === \"finished\" && \"danger\") ||\r\n          (status === \"overtime\" && \"danger\")\r\n        } ${status === \"overtime\" && \"animate__flash animate__infinite\"}`}\r\n      >\r\n        <div\r\n          className={`is-flex is-flex-centered has-background-black is-flex-column`}\r\n          style={boxStyle}\r\n        >\r\n          <p className=\"help is-success box-code is-size-4\">{specimenID}</p>\r\n          <div className=\"field is-grouped\">\r\n            <button\r\n              className=\"button m-1 is-small is-rounded\"\r\n              onClick={handleStart}\r\n            >\r\n              {\">\"}\r\n            </button>\r\n            <button\r\n              className=\"button m-1 is-small is-rounded\"\r\n              onClick={handleStop}\r\n            >\r\n              {\"[X]\"}\r\n            </button>\r\n            <button className=\"button m-1 is-small is-rounded\">\r\n              {counter}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <progress\r\n          className={`progress is-info mt-2`}\r\n          max={ready}\r\n          value={counter}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Box;\r\n","import { useStoreState } from \"easy-peasy\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faWifi } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Wifi = () => {\r\n  const network = useStoreState((state) => state.network);\r\n\r\n  return (\r\n    <Link to={\"/wifi\"} className=\"wifi\">\r\n      <FontAwesomeIcon\r\n        icon={faWifi}\r\n        className={network ? \"has-text-success\" : \"has-text-grey\"}\r\n      />\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default Wifi;\r\n","import { useStoreActions, useStoreState } from \"easy-peasy\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { getDeviceId, sendResult } from \"../js/api\";\r\nimport {\r\n  getSavedStorage,\r\n  removeFromStorage,\r\n} from \"../js/helpers\";\r\nimport Navigator from \"./Navigator\";\r\nimport ResultOptions from \"./ResultOptions\";\r\nimport Box from \"./Box\";\r\nimport Wifi from \"./Wifi\";\r\n\r\nconst Home = () => {\r\n  const boxes = useStoreState((state) => state.boxes);\r\n  const message = useStoreState((state) => state.message);\r\n  const clock = useStoreState((state) => state.clock);\r\n  const network = useStoreState((state) => state.network);\r\n  const setClock = useStoreActions((action) => action.setClock);\r\n  const setMessage = useStoreActions((action) => action.setMessage);\r\n  const setNetwork = useStoreActions((action) => action.setNetwork);\r\n  const elements = [...Array(parseInt(boxes)).keys()];\r\n  const initBoxes = [];\r\n  elements.forEach((element) => {\r\n    initBoxes.push({\r\n      id: element,\r\n      specimenID: null,\r\n      ready: false,\r\n      processingDateTime: null,\r\n    });\r\n  });\r\n\r\n  const [numberCode, setNumberCode] = useState(\"\");\r\n  const [code, setCode] = useState(\"\");\r\n  const [specimenID, setSpecimenID] = useState(\"\");\r\n  const [display, setDisplay] = useState(false);\r\n  const [lastTime, setLastTime] = useState(Date.now());\r\n\r\n  const [testBoxes, setTestBoxes] = useState(initBoxes);\r\n  const [deviceID, setDeviceID] = useState(\"\");\r\n\r\n  const setReady = (id, ready) => {\r\n    let tempBoxes = [...testBoxes];\r\n    tempBoxes[id].ready = ready;\r\n  };\r\n\r\n  const setFree = (id) => {\r\n    let tempBoxes = [...testBoxes];\r\n    tempBoxes[id].specimenID = null;\r\n    setTestBoxes(tempBoxes);\r\n  };\r\n\r\n  const handleResponse = () => {\r\n    setDisplay(false);\r\n    setMessage(\"\");\r\n    console.log(specimenID);\r\n    let target = testBoxes.find((x) => x.specimenID === specimenID);\r\n    setFree(target.id);\r\n    setReady(target.id, false);\r\n  };\r\n\r\n  const handleSuccess = (payload) => {\r\n    console.log(\"... data send:\", payload);\r\n    removeFromStorage(\"recorded\", payload, \"specimenID\");\r\n  };\r\n\r\n  const handleError = (payload) => {\r\n    console.error(\"... data not send\", payload);\r\n    console.error(\"... save to local storage\", payload);\r\n    // appendToStorage(\"recorded\", payload);\r\n  };\r\n\r\n  const handleInvalid = () => {\r\n    handleResponse();\r\n    const payload = {\r\n      SpecimenID: specimenID,\r\n      CovidTestResultID: 3,\r\n      CovidTestStatusID: 6,\r\n      DeviceID: deviceID,\r\n    };\r\n    sendResult(payload)\r\n      .then(() => handleSuccess(payload))\r\n      .catch(() => handleError(payload));\r\n  };\r\n  const handlePositive = () => {\r\n    handleResponse();\r\n    const payload = {\r\n      SpecimenID: specimenID,\r\n      CovidTestResultID: 2,\r\n      CovidTestStatusID: 4,\r\n      DeviceID: deviceID,\r\n    };\r\n    sendResult(payload)\r\n      .then(() => handleSuccess(payload))\r\n      .catch(() => handleError(payload));\r\n  };\r\n  const handleNegative = () => {\r\n    handleResponse();\r\n    const payload = {\r\n      SpecimenID: specimenID,\r\n      CovidTestResultID: 1,\r\n      CovidTestStatusID: 4,\r\n      DeviceID: deviceID,\r\n    };\r\n    sendResult(payload)\r\n      .then(() => handleSuccess(payload))\r\n      .catch(() => handleError(payload));\r\n  };\r\n  const sendProcessingStart = (specimenID) => {\r\n    const payload = {\r\n      SpecimenID: specimenID,\r\n      CovidTestResultID: null,\r\n      CovidTestStatusID: 3,\r\n      DeviceID: deviceID,\r\n    };\r\n    sendResult(payload)\r\n      .then(() => handleSuccess(payload))\r\n      .catch(() => handleError(payload));\r\n  };\r\n\r\n  const handleMismatch = () => {\r\n    setDisplay(false);\r\n    setMessage(\"\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    const now = Date.now();\r\n    setCode(`${now - lastTime > 500 ? \"\" : code}${numberCode}`);\r\n    setLastTime(now);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [numberCode]);\r\n\r\n  useEffect(() => {\r\n    const now = Date.now();\r\n     if (now - lastTime > 500 && code !== \"\") {\r\n      setSpecimenID(code);\r\n      let tempBoxes = [...testBoxes];\r\n      let currentTests = tempBoxes.map((x) => x.specimenID);\r\n      let availableBox = currentTests.indexOf(null);\r\n      let isNew = !currentTests.includes(code);\r\n\r\n      if (isNew) {\r\n        setDisplay(false);\r\n        if (availableBox >= 0) {\r\n          testBoxes[availableBox].specimenID = code;\r\n          testBoxes[availableBox].processingDateTime = new Date().toLocaleString() + '';\r\n          sendProcessingStart(code);\r\n          setMessage(\"Starting timer for test: \" + code);\r\n        } else {\r\n          setMessage(\"No box available for: \" + code);\r\n        }\r\n      } else {\r\n        let box = testBoxes.find((x) => x.specimenID === code);\r\n        if (box.ready) {\r\n          setMessage(`Test ${code} is ready, select an option: `);\r\n          setDisplay(true);\r\n        } else {\r\n          setMessage(`Test ${code} is not ready`);\r\n        }\r\n      }\r\n\r\n      setTestBoxes(tempBoxes);\r\n      setCode(\"\");\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [clock]);\r\n\r\n  useEffect(() => {\r\n    if (network) {\r\n      // Send data recorded in local storage\r\n      let recordedValues = getSavedStorage(\"recorded\", {\r\n        recorded: [],\r\n      });\r\n      console.log(\"Send data from storage\");\r\n      recordedValues.forEach((record) => {\r\n        console.log(\"...sending data:\", record);\r\n        sendResult(record).then(() =>\r\n          removeFromStorage(\"recorded\", record, \"specimenID\")\r\n        );\r\n      });\r\n    }\r\n  }, [network]);\r\n\r\n  useEffect(() => {\r\n    getDeviceId().then((res) => setDeviceID(res.id));\r\n\r\n    const scannerHandler = (e) => {\r\n      const key = e.key;\r\n      const codechars = /\\w/;\r\n      if (key.length === 1 && codechars.test(key)) setNumberCode(key);\r\n      if (key === \"F5\") e.preventDefault();\r\n    };\r\n\r\n    const interval = setInterval(() => {\r\n      setClock(Date());\r\n    }, 500);\r\n\r\n    document.addEventListener(\"keydown\", scannerHandler);\r\n    window.addEventListener(\"offline\", () => setNetwork(false));\r\n    window.addEventListener(\"online\", () => setNetwork(true));\r\n    setNetwork(window.navigator.onLine);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", scannerHandler);\r\n      window.removeEventListener(\"offline\", () => setNetwork(false));\r\n      window.removeEventListener(\"online\", () => setNetwork(true));\r\n      clearInterval(interval);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"home-container\">\r\n      <header>\r\n        <p className=\"has-text-centered title mt-4\">{message}</p>\r\n        {display && (\r\n          <ResultOptions\r\n            handleNegative={handleNegative}\r\n            handlePositive={handlePositive}\r\n            handleInvalid={handleInvalid}\r\n            handleMismatch={handleMismatch}\r\n          />\r\n        )}\r\n      </header>\r\n      <div className=\"box-container\">\r\n        {testBoxes.map((x) => (\r\n          <Box key={x.id} test={x} setReady={setReady} setFree={setFree} />\r\n        ))}\r\n        <Navigator\r\n          to=\"/config\"\r\n          onClick={() => console.log(\"Clicked Navigator\")}\r\n        />\r\n        <Wifi />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","const Modal = ({ active, setActive, title, confirm, setAction }) => {\r\n  return (\r\n    <div className={`modal ${active && \"is-active\"}`}>\r\n      <div className=\"modal-background\"></div>\r\n      <div className=\"modal-card\">\r\n        <header className=\"modal-card-head\">\r\n          <p className=\"modal-card-title\">{title}</p>\r\n        </header>\r\n\r\n        <footer className=\"modal-card-foot is-flex-end\">\r\n          <button\r\n            className=\"button is-success is-outlined\"\r\n            onClick={() => setAction()}\r\n          >\r\n            {confirm}\r\n          </button>\r\n          <button className=\"button\" onClick={() => setActive(false)}>\r\n            Cancel\r\n          </button>\r\n        </footer>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import { useStoreState, useStoreActions } from \"easy-peasy\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { setSavedStorage } from \"../js/helpers\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { faPowerOff } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { getCommit, getDeviceId } from \"../js/api\";\r\nimport Navigator from \"./Navigator\";\r\nimport Modal from \"./Modal\";\r\n\r\nconst Config = () => {\r\n  let navigate = useNavigate();\r\n  const [message, setMessage] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [power, setPower] = useState(false);\r\n  const [rpiId, setRpiId] = useState(\"\");\r\n  const [commitDate, setCommitDate] = useState(\"\");\r\n\r\n  const pxWidth = useStoreState((state) => state.pxWidth);\r\n  const cmWidth = useStoreState((state) => state.cmWidth);\r\n  const boxes = useStoreState((state) => state.boxes);\r\n  const size = useStoreState((state) => state.size);\r\n  const time = useStoreState((state) => state.time);\r\n\r\n  const setPxWidth = useStoreActions((actions) => actions.setPxWidth);\r\n  const setCmWidth = useStoreActions((actions) => actions.setCmWidth);\r\n  const setBoxes = useStoreActions((actions) => actions.setBoxes);\r\n  const setSize = useStoreActions((actions) => actions.setSize);\r\n  const setTime = useStoreActions((actions) => actions.setTime);\r\n\r\n  const [pxRef, setPxRef] = useState(pxWidth);\r\n  const [cmRef, setCmRef] = useState(cmWidth);\r\n  const [boxesRef, setBoxesRef] = useState(boxes);\r\n  const [sizeRef, setSizeRef] = useState(size);\r\n  const [timeRef, setTimeRef] = useState(time);\r\n\r\n  const handleSave = () => {\r\n    setPxWidth(pxRef);\r\n    setCmWidth(cmRef);\r\n    setBoxes(boxesRef);\r\n    setSize(sizeRef);\r\n    setTime(timeRef);\r\n\r\n    setSavedStorage(\"pxWidth\", pxRef);\r\n    setSavedStorage(\"cmWidth\", cmRef);\r\n    setSavedStorage(\"boxes\", boxesRef);\r\n    setSavedStorage(\"size\", sizeRef);\r\n    setSavedStorage(\"time\", timeRef);\r\n    setMessage(\" ... going home\");\r\n    setLoading(true);\r\n    setTimeout(() => navigate(\"/home\"), 1000);\r\n  };\r\n\r\n  const handlePower = () => {\r\n    console.log(\"... powering off\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    getDeviceId().then((res) => setRpiId(res.id));\r\n    getCommit().then((res) => setCommitDate(res.commit.date));\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <Navigator to=\"/home\" />\r\n      <div className=\"is-flex is-flex-centered config\">\r\n        <div>\r\n          <h1 className=\"subtitle has-text-centered\">Configuration</h1>\r\n          <div className=\"field\">\r\n            <label className=\"label\">Number of boxes</label>\r\n            <div className=\"control\">\r\n              <input\r\n                className=\"input\"\r\n                type=\"number\"\r\n                placeholder=\"10\"\r\n                value={boxesRef}\r\n                onChange={(e) => setBoxesRef(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"field\">\r\n            <label className=\"label\">Width of screen in pixels.</label>\r\n            <div className=\"control\">\r\n              <input\r\n                className=\"input\"\r\n                type=\"number\"\r\n                placeholder=\"1366\"\r\n                value={pxRef}\r\n                onChange={(e) => setPxRef(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"field\">\r\n            <label className=\"label\">Width of screen in centimeters.</label>\r\n            <div className=\"control\">\r\n              <input\r\n                className=\"input\"\r\n                type=\"number\"\r\n                placeholder=\"41\"\r\n                value={cmRef}\r\n                onChange={(e) => setCmRef(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"field\">\r\n            <label className=\"label\">Size of box in cm.</label>\r\n            <div className=\"control is-flex\">\r\n              <input\r\n                className=\"input\"\r\n                type=\"number\"\r\n                placeholder=\"7\"\r\n                value={sizeRef[0]}\r\n                onChange={(e) => setSizeRef([e.target.value, sizeRef[1]])}\r\n                title=\"Width\"\r\n              />\r\n              <input\r\n                className=\"input ml-4\"\r\n                type=\"number\"\r\n                placeholder=\"2\"\r\n                value={sizeRef[1]}\r\n                onChange={(e) => setSizeRef([sizeRef[0], e.target.value])}\r\n                title=\"Height\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"field\">\r\n            <label className=\"label\">Process time in min.</label>\r\n            <div className=\"control is-flex\">\r\n              <input\r\n                className=\"input\"\r\n                type=\"number\"\r\n                placeholder=\"15\"\r\n                value={timeRef.ready}\r\n                title=\"Ready to read time\"\r\n                onChange={(e) =>\r\n                  setTimeRef({ ...timeRef, ready: e.target.value })\r\n                }\r\n              />\r\n              <input\r\n                className=\"input ml-4\"\r\n                type=\"number\"\r\n                placeholder=\"19\"\r\n                value={timeRef.alarm}\r\n                title=\"Alarm time\"\r\n                onChange={(e) =>\r\n                  setTimeRef({ ...timeRef, alarm: e.target.value })\r\n                }\r\n              />\r\n              <input\r\n                className=\"input ml-4\"\r\n                type=\"number\"\r\n                placeholder=\"20\"\r\n                value={timeRef.limit}\r\n                title=\"Maximum time to get reading\"\r\n                onChange={(e) =>\r\n                  setTimeRef({ ...timeRef, limit: e.target.value })\r\n                }\r\n              />\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={handleSave}\r\n            className={`button is-success is-outlined mt-4 ${\r\n              loading && \"is-loading\"\r\n            }`}\r\n          >\r\n            Save\r\n          </button>\r\n          <p className=\"help\">{message}</p>\r\n          <div className=\"is-flex is-flex-centered m-4 \">\r\n            <FontAwesomeIcon\r\n              icon={faPowerOff}\r\n              className=\"has-text-danger pointer\"\r\n              size=\"lg\"\r\n              onClick={() => setPower(true)}\r\n            />\r\n            <Modal\r\n              active={power}\r\n              setActive={setPower}\r\n              setAction={handlePower}\r\n              title=\"Do you want to shutdown?\"\r\n              confirm=\"Shutdown\"\r\n            />\r\n          </div>\r\n          <div className=\"is-flex mt-4 is-flex-between\">\r\n            <p className=\"has-text-grey mt-4\">ID: {rpiId}</p>\r\n            <p className=\"has-text-grey mt-4\">Version: {commitDate}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Config;\r\n","import Navigator from \"./Navigator\";\r\nimport { useRef, useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { networkSave, networkScan } from \"../js/api\";\r\n\r\nconst WifiConfig = () => {\r\n  let navigate = useNavigate();\r\n  const [loading, setLoading] = useState(false);\r\n  const [networks, setNetworks] = useState([]);\r\n  const ssidRef = useRef();\r\n  const passRef = useRef();\r\n\r\n  const handleSave = () => {\r\n    setLoading(true);\r\n    networkSave(ssidRef.current.value, passRef.current.value);\r\n    setTimeout(() => navigate(\"/home\"), 1000);\r\n  };\r\n\r\n  useEffect(() => {\r\n    networkScan().then((res) => setNetworks(res.networks));\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Navigator to=\"/home\" />\r\n      <div className=\"is-flex is-flex-centered config\">\r\n        <div>\r\n          <h1 className=\"subtitle has-text-centered\">Wifi Configuration</h1>\r\n          <div className=\"field\">\r\n            <label className=\"label\">SSID</label>\r\n            <div className=\"control\">\r\n              <input\r\n                className=\"input\"\r\n                type=\"text\"\r\n                placeholder=\"WiFi SSID\"\r\n                ref={ssidRef}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"field\">\r\n            <label className=\"label\">Password</label>\r\n            <div className=\"control\">\r\n              <input\r\n                className=\"input\"\r\n                type=\"text\"\r\n                placeholder=\"********\"\r\n                ref={passRef}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleSave}\r\n            className={`button is-success is-outlined mt-4 ${\r\n              loading && \"is-loading\"\r\n            }`}\r\n          >\r\n            Save\r\n          </button>\r\n          <p className=\"help\">{\"\"}</p>\r\n          <p className=\"mt-4 has-text-centered\">Available networks</p>\r\n          <table className=\"table is-striped is-fullwidth\">\r\n            <thead>\r\n              <tr>\r\n                <th> SSID </th>\r\n                <th> SNR </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {networks.map((n) => (\r\n                <tr>\r\n                  <td>{n.ssid}</td>\r\n                  <td>{n.snr}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default WifiConfig;\r\n","import { Routes, Route } from \"react-router-dom\";\r\nimport { StoreProvider, createStore } from \"easy-peasy\";\r\nimport model from \"../js/model\";\r\nimport Home from \"./Home\";\r\nimport Config from \"./Config\";\r\nimport WifiConfig from \"./WifiConfig\";\r\n\r\nconst store = createStore(model);\r\n\r\nconst App = () => {\r\n  return (\r\n    <div>\r\n      <StoreProvider store={store}>\r\n        <Routes>\r\n          <Route path=\"home\" element={<Home />} />\r\n          <Route path=\"config\" element={<Config />} />\r\n          <Route path=\"wifi\" element={<WifiConfig />} />\r\n          <Route path=\"*\" element={<Home />} />\r\n        </Routes>\r\n      </StoreProvider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport \"./css/bulma-darkly.css\";\r\nimport \"./css/style.css\";\r\nimport \"animate.css\";\r\nimport App from \"./components/App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}